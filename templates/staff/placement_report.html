{% extends "sidebar.html" %}



{% block content %}





<div id="download-view">
<!-- Main -->

<div class="container-fluid" style="margin-top: 85px;">
  <!-- Card stats -->
  <div class="row g-6 mb-6">
    <div class="col-xl-3 col-sm-6 col-12">
      <div class="card shadow border-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="h6 font-semibold text-muted text-sm d-block mb-2">Students Need Placed </span>
              <span class="h3 font-bold mb-0">{{ students_needing_project }}</span>
            </div>
            <div class="col-auto">

              <i class="bi bi-people"></i>

            </div>
          </div>
          <div class="mt-2 mb-0 text-sm">
            <span class="badge badge-pill bg-soft-success text-success me-2">
              {{ total_students }}
            </span>
            <span class="text-nowrap text-xs text-muted">Total Students </span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 col-12">
      <div class="card shadow border-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="h6 font-semibold text-muted text-sm d-block mb-2">Students Selected</span>
              <span class="h3 font-bold mb-0">{{ student_matched }}</span>
            </div>
            <div class="col-auto">
              <i class="bi bi-clock-history"></i>

            </div>
          </div>
          <div class="mt-2 mb-0 text-sm">
            <span class="badge badge-pill bg-soft-danger text-danger me-2">
              {{ student_confirmed }}
            </span>
            <span class="text-nowrap text-xs text-muted">Student Placed</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 col-12">
      <div class="card shadow border-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="h6 font-semibold text-muted text-sm d-block mb-2"> Total Projects </span>
              <span class="h3 font-bold mb-0">{{ total_projects }}</span>
            </div>
            <div class="col-auto">

              <i class="bi bi-people"></i>

            </div>
          </div>
          <div class="mt-2 mb-0 text-sm">
            <span class="badge badge-pill bg-soft-success text-success me-2">
              {{ total_placements }}
            </span>
            <span class="text-nowrap text-xs text-muted">Available Placements</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 col-12">
      <div class="card shadow border-0">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <span class="h6 font-semibold text-muted text-sm d-block mb-2">Mentors</span>
              <span class="h3 font-bold mb-0">{{ total_mentors }}</span>
            </div>
            <div class="col-auto">

              <i class="bi bi-minecart-loaded"></i>

            </div>
          </div>
          <div class="mt-2 mb-0 text-sm">
            <span class="badge badge-pill bg-soft-success text-success me-2">
              {{ total_companies }}
            </span>
            <span class="text-nowrap text-xs text-muted">Companies</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <br>
</div>

<div class="presentation">
  <ul>
    <li onclick="showPlacementStatus()">
      <button class="btn btn-outline-primary profilebt">Placement Status</button>
    </li>
    <li onclick="showLocationStatus()" id="statusReport">
      <button class="btn btn-outline-primary profilebt">Location Status</button>
    </li>
    <li onclick="showIndustryStatus()">
      <button class="btn btn-outline-primary profilebt">Industry Status</button>
    </li>
    <li onclick="showAllReports()">
      <button class="btn btn-outline-primary profilebt">Overall Report</button>
    </li>
  </ul>
</div>

  <div style="display: flex;justify-content: space-evenly;">
    <div id="main5"  style="width: 50%; height:400px;margin:40px 20px 0 20px;"></div>
    <div id="main3"  style="width: 50%; height:400px;margin:40px 20px 0 20px;"></div>
  </div>

  <div style="display: flex;justify-content: space-evenly;">
    <div id="main1"  style="width: 50%; height:400px;margin:60px 20px 0 20px;"></div>
    <div id="main2"  style="width: 50%; height:400px;margin:60px 20px 0 20px;"></div>
  </div>
  
  <div id="main4"  style="width: 100%; height:400px;margin:60px 20px 0 20px;"></div>



  <div style="text-align: center;margin-top: 50px;">
    <button class="btn btn-outline-primary" id="download">Download Report</button>
  </div>

</div>

  <script>
    function showPlacementStatus() {
      var main1 = document.getElementById("main1");
      var main2 = document.getElementById("main2");
      var main3 = document.getElementById("main3");
      var main4 = document.getElementById("main4");
      var main5 = document.getElementById("main5");

      main1.style.display = "none";
      main2.style.display = "none";
      main3.style.display = "block";
      main4.style.display = "none";
      main5.style.display = "block";

      document.getElementById("statusReport").classList.remove("active");
    
      document.querySelector("li button.active").classList.remove("active");
      document.querySelector("li:nth-child(1) button").classList.add("active");
  }

    function showLocationStatus() {
      var main1 = document.getElementById("main1");
      var main2 = document.getElementById("main2");
      var main3 = document.getElementById("main3");
      var main4 = document.getElementById("main4");
      var main5 = document.getElementById("main5");

      main1.style.display = "block";
      main2.style.display = "block";
      main3.style.display = "none";
      main4.style.display = "none";
      main5.style.display = "none";
    }

    function showIndustryStatus() {
      var main1 = document.getElementById("main1");
      var main2 = document.getElementById("main2");
      var main3 = document.getElementById("main3");
      var main4 = document.getElementById("main4");
      var main5 = document.getElementById("main5");

      main1.style.display = "none";
      main2.style.display = "none";
      main3.style.display = "none";
      main4.style.display = "block";
      main5.style.display = "none";
    }

    function showAllReports() {
      var main1 = document.getElementById("main1");
      var main2 = document.getElementById("main2");
      var main3 = document.getElementById("main3");
      var main4 = document.getElementById("main4");
      var main5 = document.getElementById("main5");

      main1.style.display = "block";
      main2.style.display = "block";
      main3.style.display = "block";
      main4.style.display = "block";
      main5.style.display = "block";
    }

    var myChart1 = echarts.init(document.getElementById('main1'));
    var option = {{ bar_options1 | safe }};

    var myChart2 = echarts.init(document.getElementById('main2'));
    var option2 = {{ bar_options2 | safe }};

    var myChart3 = echarts.init(document.getElementById('main3'));
    var option3 = {{ liquid_option | safe }};

    var myChart4 = echarts.init(document.getElementById('main4'));
    var option4 = {{ line_options | safe }};

    var myChart5 = echarts.init(document.getElementById('main5'));
    var option5 = {{ pie_options | safe }};

    myChart1.setOption(option);
    myChart2.setOption(option2);
    myChart3.setOption(option3);
    myChart4.setOption(option4);
    myChart5.setOption(option5);



    window.addEventListener('DOMContentLoaded', () => {
    const generatePdfButton = document.getElementById('download');

    generatePdfButton.addEventListener('click', () => {
      const printContents = document.getElementById('download-view');

      // html2pdf to convert html into pdf
      html2pdf()
        .from(printContents)
        .set({
          filename: 'report.pdf',
          margin: [5, 5, 5, 5],
          jsPDF: {
            unit: 'mm',
            format: 'a4',
            orientation: 'landscape'
          }
        })
        .save('report.pdf');
    });
  });


  </script>



{% endblock %}